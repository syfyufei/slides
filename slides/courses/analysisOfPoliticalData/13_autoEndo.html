<!DOCTYPE html>
<html lang="en"><head>
<script src="13_autoEndo_files/libs/clipboard/clipboard.min.js"></script>
<script src="13_autoEndo_files/libs/quarto-html/tabby.min.js"></script>
<script src="13_autoEndo_files/libs/quarto-html/popper.min.js"></script>
<script src="13_autoEndo_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="13_autoEndo_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="13_autoEndo_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="13_autoEndo_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="13_autoEndo_files/libs/quarto-contrib/videojs/video.min.js"></script>
<link href="13_autoEndo_files/libs/quarto-contrib/videojs/video-js.css" rel="stylesheet"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.2.269">

  <meta name="author" content="Yue Hu">
  <title>Endogeneity and Autocorrelation</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="13_autoEndo_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="13_autoEndo_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
  </style>
  <link rel="stylesheet" href="13_autoEndo_files/libs/revealjs/dist/theme/quarto.css" id="theme">
  <link rel="stylesheet" href="style_basic.css">
  <link href="13_autoEndo_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="13_autoEndo_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="13_autoEndo_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="13_autoEndo_files/libs/revealjs/plugin/reveal-chalkboard/font-awesome/css/all.css" rel="stylesheet">
  <link href="13_autoEndo_files/libs/revealjs/plugin/reveal-chalkboard/style.css" rel="stylesheet">
  <link href="13_autoEndo_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-captioned.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-captioned) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-captioned.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-captioned .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-captioned .callout-caption  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-captioned.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-captioned.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-caption {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-caption {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-caption {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-captioned .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-captioned .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-captioned) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-caption {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-caption {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-caption {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-caption {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-caption {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" data-background-image="https://gitlab.com/sammo3182/backup/raw/85b3c1ad4b459d7a9f901f124b936428eda5fcaf/logo_THPS.png?inline=true" data-background-position="top 10% right 5%" data-background-size="250px" class="quarto-title-block center">
  <h1 class="title">Endogeneity and Autocorrelation</h1>
  <p class="subtitle">Large N &amp; Leeuwenhoek (70700173)</p>

<div class="quarto-title-authors">
<div class="quarto-title-author">
<div class="quarto-title-author-name">
Yue Hu 
</div>
        <p class="quarto-title-affiliation">
            Tsinghua University
          </p>
    </div>
</div>

</section>
<section id="overview" class="slide level2">
<h2>Overview</h2>
<ol type="1">
<li class="fragment">Endogeneity
<ul>
<li class="fragment">Issue</li>
<li class="fragment">Diagnosis</li>
<li class="fragment">Adjustment</li>
</ul></li>
<li class="fragment">Autocorrelation
<ul>
<li class="fragment">Issue</li>
<li class="fragment">Diagnosis</li>
<li class="fragment">Adjustment</li>
</ul></li>
</ol>
</section>
<section>
<section id="endogeneity" class="title-slide slide level1 center">
<h1>Endogeneity</h1>

</section>
<section id="egg-vs.-chicken" class="slide level2">
<h2>Egg vs.&nbsp;Chicken</h2>
<p><em>Substantively</em></p>
<p>Institutional Confidence ~ Evaluation of Redistribution Performance</p>
<div class="fragment" style="text-align:center; margin-top: 1em">
<p>Which influences which? (Causal <span class="red">direction</span>)</p>
</div>
<div class="fragment">
<p><em>Formally</em></p>
<p>Given Y<sub>i</sub> = β<sub>0</sub> + β<sub>1</sub>X<sub>i</sub> + u<sub>i</sub>, exogeneity ⇔ cov(X<sub>i</sub>, u<sub>i</sub>) = 0.</p>
<div class="fragment" style="text-align:center; margin-top: 1em">
<p>Endogeneity ⇔ cov(X<sub>i</sub>, u<sub>i</sub>) <span class="red">≠ 0</span>.</p>
</div>
</div>
<div class="fragment">
<p><em>Explicitly</em>,</p>
<p><span class="math display">\[\begin{align}
Y =&amp; \beta_0 + \beta_1X + u\\
X =&amp; \beta'_0 + \beta'_1Y + v
\end{align}\]</span></p>
</div>
</section>
<section id="one-cause-yule-simpsons-paradox" class="slide level2">
<h2>One Cause: Yule-Simpson’s Paradox</h2>
<video id="video_shortcode_videojs_video2" class="video-js vjs-default-skin vjs-fluid" controls="" preload="auto" data-setup="{}" title=""><source src="https://link.jscdn.cn/1drv/aHR0cHM6Ly8xZHJ2Lm1zL3YvcyFBcnR0dk83MHdLSU8yQUpQYk9GZmt1LTZXOGxGP2U9Y0xETjFv.mp4"></video>
<aside class="notes">
<ul>
<li>Edward H. Simpson 1951</li>
<li>Karl Pearson et al.1899</li>
<li>Udny Yule, in 1903</li>
<li>Also called as Simpson’s reversal, Yule–Simpson effect, amalgamation paradox, or reversal paradox</li>
</ul>
<p>整体 treatment &gt; control 男女都是treatment &lt; control</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="data-illustration" class="slide level2">
<h2>Data Illustration</h2>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/ea_yuleSimpson.gif" height="600"></p>
</figure>
</div>
</section>
<section id="causal-diagram-ish" class="slide level2">
<h2>Causal Diagram(-ish)</h2>
<div class="quarto-figure quarto-figure-center">
<figure>
<p><img data-src="images/ea_correlation.png"></p>
</figure>
</div>
<div class="columns">
<div class="column fragment" style="width:50%;">
<p><em>Selections on the Observables</em> (SOO)</p>
<img data-src="images/ea_selectionBias.png" class="r-stretch">
<div class="fragment">
<p><strong>Diagnosis</strong></p>
<p>Hausman Procedure (using t distribution):</p>
<p>Full (true) model is <span class="math inline">\(Y = \beta_0 + \beta_1X_1 + \beta_2X_2 + u\)</span>, and if one estimates <span class="math inline">\(Y = \beta_0 + \beta_1X_1 + u'\)</span>, X<sub>2</sub> is missed.</p>
<p>To test if this leads to endogeneity, we regress: <span class="math inline">\(X_1 = \gamma X_2 + v\)</span>, and test:</p>
<p>H<sub>0</sub>: cov(u’, v) = 0.</p>
</div>
</div><div class="column fragment" style="width:50%;">
<p><em>Unobservable Confounders</em></p>
<img data-src="images/ea_unobservable.png" class="r-stretch">
<div class="fragment">
<p><strong>Diagnosis</strong></p>
<div class="cell">
<div class="cell-output-display">
<p><img data-src="13_autoEndo_files/figure-revealjs/resPlot-1.png" width="960"></p>
</div>
</div>
</div>
</div>
</div>
</section>
<section id="adjustment-observable" class="slide level2">
<h2>Adjustment: Observable</h2>
<p><em>Fully observable</em>: Matching, weighting, even better controls would be helpful.</p>
<div class="fragment">
<p><em>Partially observable</em></p>
<p>E.g., Wage ~ <strong>X</strong><sub>labor</sub>, but only <strong>X</strong><sub>employed</sub> is observable.</p>
<aside class="notes">
<p>Suppose that a researcher wants to estimate the determinants of wage offers, but has access to wage observations for only those who work. Since people who work are selected non-randomly from the population, estimating the determinants of wages from the subpopulation who work may introduce bias.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<ul>
<li class="fragment">If the omission has a <span class="red">fixed, known limit</span> determining what observations get in to the sample → a <span class="navy">Tobit</span> model.</li>
<li class="fragment">If not → a <span class="navy">Heckman</span> model (two/N-stage model)</li>
</ul>
<div class="columns">
<div class="column fragment" style="width:50%;">
<p>Stage I: <strong>E</strong> ~ <strong>Z</strong>γ + <strong>u</strong><sub>e</sub>;</p>
<aside class="notes">
<p>ASSUMPTION: The errors are jointly normal.</p>
<p>Mills ratio: Complementary cumulative distribution function OVER probability density function:</p>
<p><span class="math display">\[\begin{align}
m(x) :=&amp; \frac{\bar{F}(x)}{f(x)},\\
\bar{F}(x) := \Pr[X&gt;x] = \int_x^{+\infty} f(u)\, du
\end{align}\]</span></p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<aside class="notes">
<p>E is the probability to be hired; W is the explanatory variables</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div><div class="column fragment" style="width:50%;">
<p>Stage II:<br>
<strong>Wage</strong>|(E, <strong>X</strong>), ~ <strong>X</strong><sub>employed</sub> + <strong>u</strong><sub>w</sub></p>
<p>E[W|X,E]=Xβ +ρσ<sub><strong>u</strong><sub>w</sub></sub>λ (Zγ),</p>
<ol type="1">
<li class="fragment">λ: Inverse Mills Ratio from stage I;</li>
<li class="fragment">ρ = corr(<strong>u</strong><sub>e</sub>, <strong>u</strong><sub>w</sub>)<sup>*</sup>;</li>
<li class="fragment">σ<sub><strong>u</strong><sub>w</sub></sub>: Standard deviation of <strong>u</strong><sub>w</sub>.</li>
</ol>
</div>
</div>
</div>
</section>
<section id="adjustment-unobservables" class="slide level2">
<h2>Adjustment: Unobservables</h2>
<p>Famous or “notorious” instrumental variables (IV)</p>
<img data-src="images/ea_instrumental.png" class="r-stretch">
<ul>
<li class="fragment">Statistically, we need a variable Z<sub>i</sub> that <span class="red">simultaneously</span> satisfies:
<ol type="1">
<li class="fragment">cov(X<sub>i</sub>, Z<sub>i</sub>) ≠ 0</li>
<li class="fragment">cov(u<sub>i</sub>, Z<sub>i</sub>) = 0</li>
</ol></li>
</ul>
</section>
<section id="examples" class="slide level2">
<h2>Examples</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p>The effect of education on earnings</p>
<p>OV: Income<br>
EV: Likelihood of going to school</p>
<aside class="notes">
<p>Individual ability</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<ul>
<li class="fragment">IV candidates:
<ol type="1">
<li class="fragment">Proximity to college (Card 1995)</li>
<li class="fragment">Month of birth (Angrist and Krueger 1991)</li>
</ol></li>
</ul>
</div><div class="column fragment" style="width:50%;">
<p>How does economic growth affect within-country conflicts?</p>
<p>OV: Incidence of civil war<br>
EV: Economic growth per capita</p>
<aside class="notes">
<p>Endogeneity: religious fractionalization, mountainous terrain, and population</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<p><span class="fragment">(What’s the problem?)</span></p>
<ul>
<li class="fragment">IV : Rainfall growth (% change in rainfall from the previous year)</li>
</ul>
<aside class="notes">
<p>Miguel, Satyanath, and Sergenti 2004, Journal of Political Economy</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<ul>
<li class="fragment">Concerns?</li>
</ul>
<aside class="notes">
<p>Agriculture only?</p>
<p>Is rainfall random? Drought in one country could make another country’s projects more scare and therefore valuable.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
</div>
<h3 id="sohow-to-find-a-proper-iv">So…how to find a proper IV</h3>
<div class="fragment">
<p>Seeking something seemingly irrelevant</p>
</div>
<div class="fragment">
<p>Seeking back to the time</p>
</div>
<div class="fragment">
<p>Making some assumptions</p>
</div>
<div class="fragment">
<p>Ok, ok, IV is a <span class="red">myth</span>, unless by design…</p>
</div>
</section>
<section id="assuming-you-found-one" class="slide level2">
<h2>Assuming You Found One</h2>
<div class="columns">
<div class="column" style="width:50%;">
<p>Two Stage Least Squares (2SLS)</p>
<p>A pretty rough way to think about it:</p>
<ol type="1">
<li class="fragment">Regress <strong>X</strong> on <strong>Z</strong> to get <span class="math inline">\(\boldsymbol{\hat X}\)</span>;</li>
<li class="fragment">Regress <strong>Y</strong> on <span class="math inline">\(\boldsymbol{\hat X}\)</span>.</li>
<li class="fragment">Solvable on one condition: Being identifiable, <span class="math display">\[\hat{\boldsymbol{\beta}}_{IV} = (\boldsymbol{Z'X})^{-1}\boldsymbol{Z'Y}\]</span></li>
</ol>
</div><div class="column fragment" style="width:50%;">
<p><em>Over-identified model</em></p>
<p><span class="small"><span class="math display">\[\begin{align}
\hat{\boldsymbol{\beta}}_{2SLS} =&amp; (\boldsymbol{X'P_ZX})^{-1}(\boldsymbol{X'P_ZY})\\
                                =&amp; (\boldsymbol{X'Z(Z'Z)^{-1}Z' X})^{-1}\boldsymbol{X'Z(Z'Z)^{-1}Z'Y}
\end{align}\]</span></span></p>
<p>where <span class="math display">\[\boldsymbol{P_z} = Z(Z'Z)^{-1}Z'\]</span> (a.k.a., the projection matrix), and <span class="math display">\[\boldsymbol{\hat X} = \boldsymbol{P_ZX}\]</span></p>
<aside class="notes">
<p>Recommend over-identified model more</p>
<p>http://www.soderbom.net/lec2n_final.pdf</p>
<p>because the additional instruments can be used to increase the precision of the estimates, and to construct tests for the validity of the overidentifying restrictions (which sheds some light on the validity of the instruments), but may lead to inefficiency.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
</div>
<h3 class="fragment" id="outcome">Outcome</h3>
<p><span class="small fragment"><span class="math display">\[\begin{align}
cov(Y_i, Z_i) =&amp; cov(\beta_0 + \beta_1X_i + u_i, Z_i)\\
              =&amp; cov(\beta_0, Z_i) + cov(\beta_1X_i, Z_i) + cov(u_i, Z_i)\\
              =&amp; \beta_1cov(X_i, Z_i)\\
\Rightarrow\beta_1 =&amp; \frac{cov(Y_i, Z_i)}{\beta_1cov(X_i, Z_i)} = \frac{\sum(Y_i - \bar Y)(Z_i - \bar Z)}{\sum(X_i - \bar X)(Z_i - \bar Z)},\\
       var(\hat\beta_1) =&amp; \frac{\sigma^2}{n\sigma_X^2\rho_{XZ}^2} \geq \frac{\sigma^2}{n\sigma_X^2\rho_{XX}^2} = \frac{\sigma^2}{\sum(X_i - \bar X)^2}
\end{align}\]</span></span></p>
<div class="fragment">
<p>Trade-off: <span class="navy">Unbiased estimates</span> from IV, yet a <span class="red">bigger variance</span> (ρ<sup>2</sup><sub>XX</sub> = 1 &gt; ρ<sup>2</sup><sub>XZ</sub>)</p>
</div>
</section>
<section id="weak-instruments" class="slide level2">
<h2>Weak Instruments</h2>
<p>An ideal Z<sub>i</sub> simultaneously satisfies cov(X<sub>i</sub>, Z<sub>i</sub>) ≠ 0, and cov(u<sub>i</sub>, Z<sub>i</sub>) = 0. However, when cov(Y, Z) is small but not equal 0, then “weak” instrument.</p>
<p><span class="math display">\[\beta_1 = \frac{cov(Y, Z) - cov(u, Z)}{cov(X, Z)}\]</span></p>
<ul>
<li class="fragment">When cov(X, Z) is salient, not fatal.</li>
<li class="fragment">When it’s small, the estimate will be <span class="red">biased</span>—in which case, OLS may be even better.</li>
</ul>
<aside class="notes">
<p>Check for the Problem: Stock and Watson (2007, 735)</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
<div class="columns">
<div class="column fragment" style="width:50%;">
<video id="video_shortcode_videojs_video1" height="40%" class="video-js vjs-default-skin " controls="" preload="auto" data-setup="{}" title=""><source src="https://link.jscdn.cn/1drv/aHR0cHM6Ly8xZHJ2Lm1zL3UvcyFBcnR0dk83MHdLSU8xbklkeVNiUjlFY3BSRWtLP2U9Mnd6T3hC.mp4"></video>
</div><div class="column fragment" style="width:50%;">
<p>Check: Sargan–Hansen test (Sargan’s J test)</p>
<ul>
<li class="fragment">Testing over-identifying restriction</li>
<li class="fragment">Computing from residuals from instrumental variables regression by constructing a quadratic form based on the cross-product of the residuals and exogenous variables</li>
<li class="fragment"><span class="math inline">\(H_0\)</span>: The over-identifying restrictions are valid</li>
<li class="fragment">Statistics: <span class="math inline">\(\chi^2\)</span></li>
</ul>
</div>
</div>
</section></section>
<section>
<section id="autocorrelation" class="title-slide slide level1 center">
<h1>Autocorrelation</h1>

</section>
<section id="typology-of-autocorrelation" class="slide level2">
<h2>Typology of Autocorrelation</h2>
<div style="text-align:center; margin-top: 2em">
<p>E(u<sub>1</sub>, u<sub>2</sub>) = 0</p>
</div>
<div class="fragment">
<p><em>Spatial autocorrelation</em></p>
<ul>
<li class="fragment">Heteroscedasticity (Multilevel)</li>
<li class="fragment">Spillover (Spatial models)</li>
</ul>
</div>
<p><span class="fragment"><em>Temporal autocorrelation</em></span></p>
<div class="columns">
<div class="column fragment" style="width:50%;">
<p><img data-src="images/ea_oneShot.gif"></p>
<p>One-period shock</p>
<aside class="notes">
<p><span class="math display">\[\begin{align}
Y_t =&amp; \beta_0 + \beta_1(Z_t + 1) + \beta_2Z_{t-1} + \cdots + u\\
Y_{t + 1} =&amp; \beta_0 + \beta_1Z_{t + 1} + \beta_2(Z_t + 1) + \beta_3Z_{t-1} + \cdots + u\\
Y_{t + 2} =&amp; \beta_0 + \beta_1Z_{t + 2} + \beta_2Z_{t + 1} + \beta_3(Z_t + 1) + \cdots + u
\end{align}\]</span></p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div><div class="column fragment" style="width:50%;">
<p><img data-src="images/ea_loki.jpg" height="250"></p>
<p>Permanent Shift</p>
<aside class="notes">
<p><span class="math display">\[\begin{align}
Y_t =&amp; \beta_0 + \beta_1(Z_{t + 1}) + \cdots + u\\
Y_{t + 1} =&amp; \beta_0 + \beta_1(Z_{t + 1} + 1) + \beta_1(Z_t + 1) + \cdots + u
\end{align}\]</span></p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
</div>
</section>
<section id="time-dependency-when-time-per-se-is-the-effect" class="slide level2">
<h2>Time Dependency: When Time Per Se Is the Effect</h2>
<p><span class="math display">\[E(u_{t_1}, u_{t_2}|X_{t_1}, X_{t_2}) \neq 0.\]</span></p>
<p>When two variables both have, e.g., a positive trend, then they appear correlated, although they are actually not.</p>
<p><span class="fragment"><strong>Adjustment</strong></span></p>
<div class="columns">
<div class="column" style="width:50%;">
<ul>
<li class="fragment">Fixed Effect: <span class="math inline">\(Y_t\sim X_t + Time_t\)</span></li>
<li class="fragment">De-trend: <span class="math inline">\(Y_t\sim X_t\)</span>
<ul>
<li class="fragment"><span class="math display">\[\begin{align}
\text{Run } Y_t =&amp; \beta_0 + \beta_1Time + u_t;\\
        X_t =&amp; \gamma_0 + \gamma_1Time + v_t;\\
\text{Run } Y'_t =&amp; Y_t - (\hat\beta_0 + \hat\beta_1Time);\\
        X'_t =&amp; X_t - (\hat\gamma_0 + \hat\gamma_1Time).\\
\Rightarrow\ Y'_t =&amp; \delta X'_t + e_t.
\end{align}\]</span></li>
</ul></li>
</ul>
</div><div class="column" style="width:50%;">
<ul>
<li class="fragment">Spline
<ul>
<li class="fragment"><img data-src="images/ea_spline.png" height="200"></li>
</ul></li>
<li class="fragment">Smooth function: t + t<sup>2</sup> + t<sup>3</sup></li>
</ul>
<aside class="notes">
<p>“nearly identical substantively [with spline]”, Carter, David B., and Curtis S. Signorino. 2010. “Back to the Future: Modeling Time Dependence in Binary Data.” <em>Political Analysis</em> 18(3): 271–92.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</div>
</div>
</section>
<section id="when-time-is-more-than-time" class="slide level2">
<h2>When Time is More than Time</h2>
<p>Affecting the relations between OV and EVs and among IVs…</p>
<div class="fragment" style="text-align:center">
<p><em>Time series analysis</em></p>
</div>
<ul>
<li class="fragment">Random Walk &amp; Unit Root: Let ρ∈[-1, 1] identify the direction the path will go (↓-1, ↑1, →0).
<ul>
<li class="fragment"><span class="math display">\[\begin{align}
Y_t =&amp; \rho Y_{t - 1} + e_t\\
u_t =&amp; \rho u_{t - 1} + e_t, e_t\sim iid(0, \sigma^2)\\
\Rightarrow\ u_{t + 1} =&amp; \rho u_t + e_{t+1}\\
                   =&amp; \rho(\rho u_{t - 1} + e_t) + e_{t + 1}\\
                   =&amp; \rho(\rho (\rho u_{t - 2} + e_{t-1}) + e_t) + e_{t + 1}
\end{align}\]</span></li>
<li class="fragment">|ρ| &lt; 1 implies the effects of previous errors goes away eventually;</li>
<li class="fragment">|ρ| = 1, the pass never goes away, and the trend can end anywhere, a.k.a. one <span class="red">Unit Root</span>.</li>
</ul></li>
</ul>
<aside class="notes">
<h3 id="stationary">Stationary</h3>
<p>For every collection of time periods (X<sub>t<sub>1</sub></sub>, X<sub>t<sub>2</sub></sub>, X<sub>t<sub>3</sub></sub>,… where t<sub>1</sub> &lt; t<sub>2</sub> &lt; t<sub>3</sub>…), their distributions are the same as X<sub>t<sub>1</sub></sub> + h, X<sub>t<sub>2</sub></sub> + h, X<sub>t<sub>3</sub></sub> + … i.e., the .navy[same joint distribution], or saying the .navy[error terms are the same] for every period.</p>
<p><img src="images/ea_baguazhang.gif" height="300"></p>
<p><img src="images/ea_zuiquan.gif" height="300"></p>
<h3 id="covariance-stationary">Covariance Stationary</h3>
<p>Given:</p>
<ol type="1">
<li>t(X<sub>t</sub>) is constant;</li>
<li>var(X<sub>t</sub>) is constant;</li>
<li>cov(X<sub>t</sub>,X<sub>t + n</sub>)does not rely on t, i.e., cov(X<sub>t,</sub>X<sub>t + n</sub>) = cov(X<sub>t + 1</sub>,X<sub>t + 2</sub>).</li>
</ol>
<p>Then, a moving average process that is covariance stationary is weakly dependent if cov(X<sub>t</sub>,X<sub>t + n</sub>)→0 as n→∞.</p>
<p>When covariance stationary plus weakly dependent (e.g., <span class="math inline">\(Y_t = \rho Y_{t - 1} + X_t + e_t\)</span>), the OLS is consistent.</p>
<h3 id="influence-on-the-coefficient">Influence on the Coefficient</h3>
<p>Let’s assume the mean of X is zero to simplify the maths</p>
<p><span class="math display">\[\begin{align}
\hat\beta_1 =&amp; \beta_1 + \frac{\sum(X_t - \bar X)}{\sum(X_t - \bar X)^2}u_t\\
            =&amp; \beta_1 + \frac{\sum X_t}{\sum X_t^2}u_t, u_t = \rho u_{t - 1} + e_t
\end{align}\]</span></p>
<p>Only when ρ = 0 (or cov(X<sub>t</sub>, X<sub>t + n</sub>) = 0), the estimate is identical with the OLS estimate.</p>
<p>In other cases, β is <span class="red">biased</span>.</p>
<h3 id="influence-on-the-variance">Influence on the Variance</h3>
<p><span class="math display">\[\begin{align}
var(u_t|X) =&amp; var(\rho u_{t - 1} + e_t|X),\\
           =&amp; var(\rho(\rho u_{t - 2} + e_{t - 1}) + e_t|X),\\
           =&amp; var(\rho(\rho (\rho u_{t - 3} + e_{t-2}) + e_{t-1}) + e_t|X),\\
           =&amp; var(\rho^3u_{t - 3} + \rho^2e_{t-2} + \rho e_{t - 1} + e_t |X),\\
           =&amp; \rho^6var(u_{t - 3}) + \rho^4\sigma_{e_{t-2}} + \rho^2\sigma_{e_{t-2}} + \sigma_e^2.
\end{align}\]</span></p>
<p>Following this manner, when t increases,</p>
<p><span class="math display">\[\begin{align}
var(u_t|X) =&amp; \sigma_e^2 + \rho^2\sigma_e^2 + \rho^4\sigma^2 +\cdots,\\
           =&amp; \sigma_e^2\sum^T_{t = 1}\rho^{2(t - 1)} = \frac{\sigma_e^2}{1 - \rho^2}.
\end{align}\]</span></p>
<p>When ρ &gt; 0, the estimation of variance through OLS will be <span class="red">overestimated</span>.</p>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="diagnosis-durbin-watson-test" class="slide level2">
<h2>Diagnosis: Durbin-Watson test</h2>
<p>Testing <span class="red">only</span> AR(1)</p>
<p><span class="math display">\[\begin{align}
DW =&amp; \frac{\sum^T_{t = 2}(\hat u_t - \hat u_{t - 1})^2}{\sum^T_{t = 2}\hat u_t^2}= \frac{\sum^T_{t = 2}(\rho\hat u_{t-1} + e_t - \hat u_{t - 1})^2}{\sum^T_{t = 2}\hat u_t^2}\\
   =&amp; \frac{\sum^T_{t = 2}[(\rho - 1)\hat u_{t - 1} + e_t]^2}{\frac{\sigma_e^2}{1 - \rho^2}}\\
   =&amp; \frac{\sum^T_{t = 2}\{[(1 - \rho)^2\hat u^2_{t - 1}] + 2(\rho - 1)\hat u_{t - 1}e_t + e_t^2\}}{\frac{\sigma_e^2}{1 - \rho^2}}\\
   \approx&amp; \frac{\sum^T_{t = 2}[(1 - \rho)^2\sigma_u^2 + \sigma_e^2]}{\frac{\sigma_e^2}{1 - \rho^2}} = (1 - \rho)^2 + (1 - \rho^2) = 2(1 - \rho)
\end{align}\]</span></p>
<p>Since the range of ρ is [-1, 1], DW ∈ [0, 4].</p>
</section>
<section class="slide level2">

<p>In practice, DW test specifies a range of values, [d<sub>l</sub>, d<sub>u</sub>], and set the hypotheses:</p>
<blockquote>
<p>Positive AR: H<sub>0</sub>: ρ = 0; H<sub>1</sub>: ρ &gt; 0</p>
</blockquote>
<div class="columns">
<div class="column" style="width:50%;">
<p><em>Positive autocorrelation</em></p>
<p>DW &lt; d<sub>l</sub>, reject H<sub>0</sub>;<br>
d<sub>l</sub> &lt; DW &lt; d<sub>u</sub>, inconclusive;<br>
DW &gt; d<sub>u</sub>, fail to reject H<sub>0</sub></p>
</div><div class="column" style="width:50%;">
<p><em>Negative autocorrelation</em></p>
<p>(4 - DW) &lt; d<sub>l</sub>, reject H<sub>0</sub>;<br>
d<sub>l</sub> &lt; (4 - DW) &lt; d<sub>u</sub>, inconclusive;<br>
(4 - DW) &gt; d<sub>u</sub>, fail to reject H<sub>0</sub></p>
</div>
</div>
</section>
<section id="adjustment" class="slide level2">
<h2>Adjustment</h2>
<p>Most common model: Autoregressive distributed lag model (ADL)</p>
<div class="fragment" style="text-align:center">
<div class="quarto-figure quarto-figure-center">
<figure>
<p><a href="https://cran.r-project.org/web/views/TimeSeries.html"><img data-src="images/ea_hugePit.jfif"></a></p>
</figure>
</div>
</div>
<ul>
<li class="fragment">Mitchell, Sara B. 2017. “Time Series Analysis for the Social Sciences.” <em>Contemporary Sociology</em> 46(5).</li>
<li class="fragment">Box-Steffensmeier, Janet M. 2014. <em>Time Series Analysis for the Social Sciences</em>. New York: Cambridge University Press.</li>
</ul>
<aside class="notes">
<h3 id="special-case-panel">Special Case: Panel</h3>
<p>Different from time series: T small, N large</p>
<p>General model: <span class="math inline">\(Y_{it} = \beta_0 + \beta_1X_{it} + u_{it}\)</span></p>
<p><strong>Solution 1</strong>: Fixed effect</p>
<p><span class="math display">\[Y_{it} = \beta_0 + \beta_1X_{it} + a_i + u_{it}\]</span></p>
<p><strong>Solution 2</strong>: Fixed differentiating</p>
<p><span class="math display">\[\begin{align}
Y_{i2} - Y_{i1} =&amp; (\beta_0 - \beta_0) + \beta_1(X_{i2} - X_{i1}),\\
                 &amp;+ (u_{i2} - u_{i1}),\\
\Delta Y_i =&amp; \beta_1\Delta X_i + \Delta u_i.
\end{align}\]</span></p>
<p>Both are unbiased and consistent, nevertheless:</p>
<p>When N = 2, FE and FD are identical;</p>
<p>When N &gt; 2, not necessarily;</p>
<p>When autocorrelation is weak in the errors, FE might be better with smaller variance.</p>
<p><span class="red">Hint</span>: Neither methods allows time invariant X.</p>
<h3 id="special-case-tscs">Special Case: TSCS</h3>
<p>General model:</p>
<p><span class="math display">\[Y_{it} = \beta_0 + \beta_1X_{it} + \beta_2X_t + \beta_3X_i + u_{it}\]</span></p>
<p>X<sub>t</sub>: Only varying by time.</p>
<p>X<sub>i</sub>: Only varying by unit.</p>
<h3 id="tscs-dealing-with-time">TSCS Dealing with Time</h3>
<p><strong>Solution 1</strong>: Detrend</p>
<ol type="1">
<li>Detrending functions, e.g., the time smooth function/spline</li>
<li>Adding lag Y [AR(1)] (.magenta[Hint]: May cause bias).</li>
</ol>
<p><strong>Solution 2</strong>: Regime switching</p>
<p><span class="math display">\[\begin{align}
Y_{it} =&amp; \beta_0 + \beta_1X_{it} + \beta_2X_{it}dZ_t + \beta_3dZ_t + u_{it}\\
   dZ_t =&amp; 1, \text{if } t \leq t^*.
\end{align}\]</span></p>
<p>Structural break at t<sup>*</sup> in the X-Y relationship.</p>
<h4 id="treating-time-dependency-as-unit-heterogeneity">Treating time dependency as unit heterogeneity</h4>
<p><strong>Solution 1</strong>: LSDV, <span class="math inline">\(Y_{it} = \delta_td_{t} + \beta_1X_{it} + a_i + u_{it}\)</span></p>
<p><span class="math inline">\(\delta_td_{t}\)</span>: Fixed effect for time</p>
<p><span class="math inline">\(a_i\)</span>: Fixed effect for unit (unit-specific mean differences)</p>
<p><strong>Cons</strong>:</p>
<ol type="1">
<li>Using up the d.f.</li>
<li>Aggravating multicollinearity</li>
<li>.magenta[Losing time invariant variables].</li>
</ol>
<p><strong>Solution 2</strong>: Within-between model or random effect model</p>
<p>Modeling time as a level</p>
<p><span class="math display">\[Y_{it} = \delta_td_{t} + \beta_1X_{it} + a_i + u_{it}\]</span></p>
<p>Instead of using binaries, modeling <span class="math inline">\(a_i\sim N(0, \tau^2)\)</span></p>
<p>[ASSUMPTION].red:</p>
<ol type="1">
<li>cov(a<sub>i</sub>, X<sub>it</sub>)= 0 (strong)</li>
<li>cov(a<sub>i</sub>, u<sub>it</sub>)= 0</li>
</ol>
<style type="text/css">
        span.MJX_Assistive_MathML {
          position:absolute!important;
          clip: rect(1px, 1px, 1px, 1px);
          padding: 1px 0 0 0!important;
          border: 0!important;
          height: 1px!important;
          width: 1px!important;
          overflow: hidden!important;
          display:block!important;
      }</style></aside>
</section>
<section id="take-home-point" class="slide level2">
<h2>Take-home point</h2>
<img data-src="images/ea_mindmap.png" class="r-stretch">
</section>
<section id="have-a-break" class="slide level2">
<h2>Have a break</h2>
<video id="video_shortcode_videojs_video3" class="video-js vjs-default-skin vjs-fluid" controls="" preload="auto" data-setup="{}" title=""><source src="https://link.jscdn.cn/1drv/aHR0cHM6Ly8xZHJ2Lm1zL3YvcyFBcnR0dk83MHdLSU8xSDM3UzNHdnNiNExETzJUP2U9SmIxVGFw.mp4"></video>
<div class="footer footer-default">

</div>
</section></section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="13_autoEndo_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="13_autoEndo_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="13_autoEndo_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="13_autoEndo_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="13_autoEndo_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="13_autoEndo_files/libs/revealjs/plugin/reveal-chalkboard/plugin.js"></script>
  <script src="13_autoEndo_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="13_autoEndo_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="13_autoEndo_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="13_autoEndo_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="13_autoEndo_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleChalkboard(event)\"><kbd>b</kbd> Toggle Chalkboard</a></li>\n<li class=\"slide-tool-item\" data-item=\"5\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.toggleNotesCanvas(event)\"><kbd>c</kbd> Toggle Notes Canvas</a></li>\n<li class=\"slide-tool-item\" data-item=\"6\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.downloadDrawings(event)\"><kbd>d</kbd> Download Drawings</a></li>\n<li class=\"slide-tool-item\" data-item=\"7\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'chalkboard': {"buttons":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: 'c/t',

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: true,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, RevealChalkboard, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        // dispatch for htmlwidgets
        function fireSlideEnter() {
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);
        }

        function fireSlideChanged(previousSlide, currentSlide) {
          fireSlideEnter();

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        target: function(trigger) {
          return trigger.previousElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        let tooltip;
        if (window.bootstrap) {
          button.setAttribute("data-bs-toggle", "tooltip");
          button.setAttribute("data-bs-placement", "left");
          button.setAttribute("data-bs-title", "Copied!");
          tooltip = new bootstrap.Tooltip(button, 
            { trigger: "manual", 
              customClass: "code-copy-button-tooltip",
              offset: [0, -8]});
          tooltip.show();    
        }
        setTimeout(function() {
          if (tooltip) {
            tooltip.hide();
            button.removeAttribute("data-bs-title");
            button.removeAttribute("data-bs-toggle");
            button.removeAttribute("data-bs-placement");
          }
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto-reveal',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      const findCites = (el) => {
        const parentEl = el.parentElement;
        if (parentEl) {
          const cites = parentEl.dataset.cites;
          if (cites) {
            return {
              el,
              cites: cites.split(' ')
            };
          } else {
            return findCites(el.parentElement)
          }
        } else {
          return undefined;
        }
      };
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const citeInfo = findCites(ref);
        if (citeInfo) {
          tippyHover(citeInfo.el, function() {
            var popup = window.document.createElement('div');
            citeInfo.cites.forEach(function(cite) {
              var citeDiv = window.document.createElement('div');
              citeDiv.classList.add('hanging-indent');
              citeDiv.classList.add('csl-entry');
              var biblioDiv = window.document.getElementById('ref-' + cite);
              if (biblioDiv) {
                citeDiv.innerHTML = biblioDiv.innerHTML;
              }
              popup.appendChild(citeDiv);
            });
            return popup.innerHTML;
          });
        }
      }
        var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
          var filterRegex = new RegExp('/' + window.location.host + '/');
        var isInternal = (href) => {
            return filterRegex.test(href) || localhostRegex.test(href);
        }
        // Inspect non-navigation links and adorn them if external
        var links = window.document.querySelectorAll('a:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item)');
        for (var i=0; i<links.length; i++) {
          const link = links[i];
          if (!isInternal(link.href)) {
              // target, if specified
              link.setAttribute("target", "_blank");
          }
        }
    });
    </script>
    
    
    
    

</body></html>