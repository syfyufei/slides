# 更新日志

## v1.1.0 (2025-10-13) - 教学体验优化

### ✨ 新增功能

#### 1. 📊 代码输出展示

**问题**：学生在课堂上看到代码，但不知道运行结果是什么样的。

**解决方案**：在关键代码块后添加 `📊 预期输出示例` 或 `📊 输出示例` callout 框，展示代码运行的预期结果。

**已添加输出示例的位置**：

1. **数据概览页面** (第 274-323 行)
   - 展示数据结构（前 10 行）
   - 时间范围、文档数、总统数、党派分布
   - 让学生直观了解数据长什么样

2. **字典加载页面** (第 449-468 行)
   - 展示字典类别和词数
   - 每个类别的示例词汇
   - 帮助学生理解字典结构

3. **LLM 标注示例** (第 1030-1054 行)
   - 展示人工标注 vs LLM 标注对比
   - 指出不一致案例
   - 一致性百分比计算

4. **一致性计算结果** (第 1086-1107 行)
   - Cohen's Kappa 值和解释
   - 统计显著性检验结果
   - 实际意义解读

**优势**：
- ✅ 学生不执行代码也能看到预期输出
- ✅ 理解代码的实际效果
- ✅ 建立对数据和结果的直觉
- ✅ 降低课堂演示的技术门槛

---

#### 2. 📦 课前准备：下载资源页面

**问题**：学生不知道在哪里下载数据和脚本，课程开始前没有明确的准备指引。

**解决方案**：在"数据获取与准备"章节之前，新增一个完整的 **"课前准备：下载资源"** 章节（约 100 行）。

**新增内容**：

##### 📦 下载课程材料页面 (第 141-191 行)

包含两列布局：

**左列：数据文件**
- 📥 SOTU 数据 CSV 下载链接
- 数据描述（时间跨度、字段说明）
- 一键脚本获取方式

**右列：脚本文件**
- 📥 各个 R 脚本的独立下载链接
  - `fetch_sotu.R` - 数据获取
  - `make_collocation_graph.R` - 网络分析
  - `dict_en.yml` - 风格字典
- 🔗 GitHub 完整项目仓库链接

**使用建议提示框**：
- 跟随演示：不必立即下载
- 动手实践：Lab 前下载
- 课后复现：克隆 GitHub 仓库

##### 📚 安装 R 包页面 (第 195-231 行)

- 完整的 `install.packages()` 命令
- 按功能分类的包列表（数据处理、文本分析、网络、统计）
- 安装时间提示（5-10 分钟）
- 清华 CRAN 镜像配置（应对网络限制）

**优势**：
- ✅ 清晰的课前准备流程
- ✅ 一键复制粘贴的安装命令
- ✅ 多种下载途径（直接下载 vs 脚本获取 vs GitHub）
- ✅ 适合不同网络环境的备选方案
- ✅ 降低学生的准备成本

---

### 🎨 设计亮点

#### 1. Callout 框统一风格

使用三种 callout 类型：

- **📋 `callout-note`**：中性信息（下载链接、输出示例）
- **💡 `callout-tip`**：建议和最佳实践
- **⚠️ `callout-warning`**：重要提示（安装时间、网络限制）

#### 2. 图标语义化

- 📦 下载/资源
- 📊 数据/输出
- 📝 脚本/文件
- 🔗 链接
- 💡 建议
- ⚠️ 警告

#### 3. 渐进式引导

- **课前**：展示下载链接，但不强制
- **课中**：跟随演示，看输出示例
- **Lab 前**：提醒下载数据和脚本
- **课后**：GitHub 完整复现

---

### 📈 教学效果提升

| 改进点 | 之前 | 之后 |
|--------|------|------|
| **代码理解** | 只看代码，不知道输出 | 看代码 + 预期输出，建立直觉 |
| **资源获取** | 不清楚在哪下载 | 明确的下载页面 + 多种途径 |
| **环境准备** | 没有统一的安装指引 | 一键复制粘贴的安装命令 |
| **课堂节奏** | 可能中断演示去下载 | 课前准备清晰，课中流畅 |
| **学生体验** | 需要自己摸索 | 引导明确，降低门槛 |

---

### 🔧 技术细节

#### 代码块 eval 控制

- 展示代码：`#| eval: false` + `#| echo: true`
- 不执行但展示输出：在后面添加 callout 框手动写输出
- 优势：课堂演示快速，不依赖真实数据和环境

#### 下载链接格式

```markdown
- 📥 [下载 sotu.csv](data/sotu.csv)
- 📥 [fetch_sotu.R](scripts/fetch_sotu.R)
- 🔗 [GitHub 仓库](https://github.com/...)
```

相对路径确保在本地和 Web 服务器上都能工作。

---

### 📝 讲者备注增强

在新增页面中都添加了详细的讲者备注，例如：

```markdown
::: notes
讲者备注：
- 展示下载链接，但不要求立即下载
- 强调 Lab 前下载即可
- 提醒学生记下 GitHub 地址
:::
```

帮助讲师掌握节奏和重点。

---

### ✅ 质量保证

- [x] 渲染无错误（已测试）
- [x] 输出示例格式正确
- [x] 下载链接相对路径有效
- [x] Callout 框渲染美观
- [x] 中英文排版清晰
- [x] 讲者备注完整

---

### 📊 统计数据

**新增内容**：
- 新增幻灯片页面：**3 页**
  - 下载资源页面：1 页
  - 安装 R 包页面：1 页
  - 数据概览页面：1 页（已有，增强）

- 新增代码输出示例：**4 处**
  - 数据概览输出
  - 字典加载输出
  - LLM 标注输出
  - 一致性计算输出

- 新增行数：约 **150 行**

**文件大小**：
- 更新前：~900 行
- 更新后：~1050 行
- 增幅：~17%

---

## 使用指南

### 查看下载页面

渲染后打开 HTML，在"贯穿式案例：SOTU"之后会看到：

1. **课前准备：下载资源** 章节
2. **数据获取与准备** 章节

### 查看输出示例

在以下页面会看到 `📊 预期输出示例` 或 `📊 输出示例` 框：

- 数据概览页面
- 字典加载页面
- LLM 标注示例页面
- 一致性计算页面

### 演讲者视图

按 `S` 键打开演讲者视图，可以看到每页的讲者备注，包括新增页面的引导要点。

---

## 反馈与迭代

如需进一步优化，可以考虑：

1. **更多输出示例**：在回归分析、主题模型等页面添加
2. **可视化输出**：添加图表的预期效果截图
3. **交互式下载**：集成文件打包下载功能
4. **视频演示**：嵌入简短的操作录屏

---

**更新完成！** 🎉

课程材料现在更加完善，学生体验显著提升。
